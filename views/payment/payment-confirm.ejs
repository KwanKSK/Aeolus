<%- include('../partials/header-user.ejs') %>
<%- include('../partials/nav-user.ejs') %>

<div class="content-info">
<section class="container my-3">
    <div class="row justify-content-center">

        <div class="col-md-7 mb-5">

            <div class="box" style="margin-bottom: 10px;">
                <h5>Confirm payment</h5>
                <hr>
                <form action='/flight/payment/<%= booking._id %>/done' method="POST">
                    <div class="row">
                        <div class="col">Method: <%= method %></div>
                        <div class="col">
                            <button class="btn btn-primary btn-my-sm" type="submit" name="method" value="<%= method %>"> Pay </button>   
                        </div>                    
                    </div>   
                </form>      
            </div>

            <!-- Price -->
            <div class="box">
                <h5 class="mb-3">Summary</h5>
                <hr>

                <% if(booking.adult > 0) { %>
                    <div class="row">
                        <h6 class="text-start col-7"><%= booking.flight.airline.name %> (Adult) x <%= booking.adult %> </h6>
                        <!--
                        <h6 class="text-end col-3"> THB</h6>
                        <h6 class="text-end col-2">
                    
                        <% if(booking.seatClass == "economy") { %>
                            <%= booking.adult * booking.flight.classInfo.economy.ecoPriceAdult %>
                        <% } else if(booking.seatClass == "business") { %>
                            <%= booking.adult * booking.flight.classInfo.business.busPriceAdult %>
                        <% } else { %>
                            <%= booking.adult * booking.flight.classInfo.firstclass.firstPriceAdult %>
                        <% } %>
                        </h6>
                        -->
                    </div>
                <% } %>
                <% if(booking.child > 0) { %>
                    <div class="row">
                        <h6 class="text-start col-7"><%= booking.flight.airline.name %> (Child) x <%= booking.child %> </h6>
                        <!--
                        <h6 class="text-end col-3"> THB</h6>
                        <h6 class="text-end col-2">
                        <% if(booking.seatClass == "economy") { %>
                            <%= booking.child * booking.flight.classInfo.economy.ecoPriceChild %>
                        <% } else if(booking.seatClass == "business") { %>
                            <%= booking.child * booking.flight.classInfo.business.busPriceChild %>
                        <% } else { %>
                            <%= booking.child * booking.flight.classInfo.firstclass.firstPriceChild %>
                        <% } %>                            
                        </h6>
                        -->
                    </div>
                <% } %>
                <% if(booking.infant > 0) { %>
                    <div class="row">
                        <h6 class="text-start col-7"><%= booking.flight.airline.name %> (Infant) x <%= booking.infant %> </h6>
                        <!--
                        <h6 class="text-end col-3"> THB</h6>

                        <h6 class="text-end col-2">
                        <% if(booking.seatClass == "economy") { %>
                            <%= booking.infant * booking.flight.classInfo.economy.ecoPriceInfant %>
                        <% } else if(booking.seatClass == "business") { %>
                            <%= booking.infant * booking.flight.classInfo.business.busPriceInfant %>
                        <% } else { %>
                            <%= booking.infant * booking.flight.classInfo.firstclass.firstPriceInfant %>
                        <% } %>
                        </h6>
                        -->
                        
                    </div>
                <% } %>
                <hr>

                <div class="row">
                    <h6 class="text-start col-6">Price you pay</h6>
                    <h6 class="text-end col-4"> THB</h6>
                    <h6 class="text-end col-2"> <%= booking.totalPrice %> </h6>                       
                </div>
            </div>


        </div>

        <div class="col-md-5">

            <!-- Payment -->
            <div class="box" style="margin-bottom: 10px;">
                <h5>Payment Detail</h5>
                <hr>
                <div class="list-detail">
                    <div>
                        Payment ID: <%= booking.bookingID %> 
                    </div>
                    <div>
                        Payment Status:  <%= booking.paymentstatus %> 
                    </div>
                </div>
            </div>

            <!-- Flight Detail -->
            <div class="box" style="margin-bottom: 10px;">
                <h5>Flight Detail</h5>
                <hr>

                <div class="row align-items-center justify-content-center text-center" id=flightlist>

                    <div class="col-sm-4 col-xl-3" id="flightairline">
                        <img src="<%= booking.flight.airline.logo %>" alt="Airline logo" width="50" height="50">

                        <div>
                            <strong> <%=  booking.flight.airline.name %> </strong>
                            (<%=  booking.flight.flightNumber %>)
                        </div>
                    </div>

                    <div class="col-4 col-sm-3 col-xl-2" id="flightfrom">
                        <div class="fw-bold">
                            <%= booking.flight.departureTime %> 
                        </div>
                        <div>
                            <%= booking.flight.origin.IATA %> 
                        </div>
                    </div>

                    <div class="col-3 col-sm-2 col-xl-3"><i class="bi bi-arrow-right"></i></div>

                    <div class="col-4 col-sm-3 col-xl-3" id="flightto">
                        <div class="fw-bold">
                            <%= booking.flight.arrivalTime %> 
                        </div>
                        <div>
                            <%= booking.flight.destination.IATA %>
                        </div>
                    </div>

                </div>

            </div>

            <!-- Contact Detail -->
            <div class="box">
                <h5>Contact Detail</h5>
                <hr>
                <div class="row">
                    <div class="col">
                        Name: <%= booking.contact.firstname %> <%= booking.contact.lastname %>
                    </div>
                    <div class="col">
                        Tel: <%= booking.contact.tel %>
                    </div>
                </div>
            </div>



        </div>


    </div>
</section>
</div>

    


<%- include('../partials/footer-user.ejs') %>